<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linha de Cuidado da Catarata</title>
    <link rel="icon" type="image/png" href="favicon.png">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="brand-bar">
        <div class="brand-content">
            <img src="fav.png" alt="Logo FAV" class="brand-logo">
            <img src="qualidade.png" alt="Logo Qualidade" class="brand-logo">
        </div>
    </div>

    <div class="container" id="mainContainer">
        <header>
            <div class="main-icon"><i class="fa-solid fa-eye"></i></div>
            <h1 id="pageTitle">Avaliação Pré-Operatória</h1>
            <p class="subtitle">Formulário de Acompanhamento</p>
        </header>

        <form id="cataractForm">

            <div class="clinical-stage-selector" role="group">
                <div class="stage-option active" onclick="selectStage('pre')" id="btnPre">
                    <i class="fa-solid fa-calendar-check"></i> Pré-Operatório
                </div>
                <div class="stage-option" onclick="selectStage('pos')" id="btnPos">
                    <i class="fa-solid fa-notes-medical"></i> Pós-Operatório
                </div>
                <input type="hidden" id="stageInput" name="stage" value="pre">
            </div>

            <p class="form-legend"><span class="required-mark">*</span> Campos obrigatórios.</p>

            <section class="card">
                <div class="section-title"><i class="fa-solid fa-user-circle"></i> Dados do Paciente</div>
                <div class="form-grid">

                    <div class="input-group">
                        <label for="prontuario">Prontuário <span class="required-mark">*</span></label>
                        <div style="display: flex;">
                            <input type="number" id="prontuario" name="prontuario" required placeholder="Digite o nº"
                                style="border-radius: 10px 0 0 10px; border-right: none;" onchange="buscarPaciente()">
                            <button type="button" onclick="buscarPaciente()" id="btnBuscar"
                                style="background: var(--color-primary); color: white; border: none; border-radius: 0 10px 10px 0; padding: 0 20px; cursor: pointer;"><i
                                    class="fa-solid fa-magnifying-glass"></i></button>
                        </div>
                        <small id="feedbackProntuario" class="feedback-msg"></small>
                    </div>

                    <div class="input-group">
                        <label for="nome">Nome Completo <span class="required-mark">*</span></label>
                        <input type="text" id="nome" name="nome" required>
                    </div>

                    <div class="input-group">
                        <label for="mae">Nome da Mãe</label>
                        <input type="text" id="mae" name="mae">
                    </div>

                    <div class="input-group">
                        <label for="nascimento">Data de Nascimento <span class="required-mark">*</span></label>
                        <input type="date" id="nascimento" name="nascimento" required>
                    </div>

                    <div class="input-group">
                        <label for="telefone">Telefone <span class="required-mark">*</span></label>
                        <input type="tel" id="telefone" name="telefone" required maxlength="15"
                            placeholder="(81) 90000-0000">
                    </div>

                    <div class="input-group">
                        <label for="dataCirurgia">Data da Cirurgia</label>
                        <input type="date" id="dataCirurgia" name="dataCirurgia">
                    </div>

                    <div class="input-group">
                        <label for="tipoCirurgia">Tipo</label>
                        <select id="tipoCirurgia" name="tipoCirurgia">
                            <option value="Catarata">Catarata</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="olhoOperado">Olho <span class="required-mark">*</span></label>
                        <select id="olhoOperado" name="olhoOperado" required>
                            <option value="">Selecione...</option>
                            <option value="OD">Direito (OD)</option>
                            <option value="OE">Esquerdo (OE)</option>
                            <option value="AO">Ambos (AO)</option>
                        </select>
                    </div>
                </div>
            </section>

            <section class="card">
                <div class="section-title"><i class="fa-solid fa-glasses"></i> Avaliação Visual</div>
                <div id="questionsContainer"></div>

                <div class="score-box" id="scoreSection">
                    <h3>Score Total</h3>
                    <span class="score-value" id="scoreDisplay">0</span>
                    <span class="score-interpretation" id="scoreText">--</span>
                </div>
            </section>

            <div class="lgpd-section">
                <label class="checkbox-wrapper" id="lgpdWrapper">
                    <input type="checkbox" id="lgpdConsent" required>
                    <span><strong>Termo de Consentimento:</strong> Declaro que autorizo a coleta e o tratamento dos meus
                        dados clínicos para fins exclusivos de acompanhamento médico e estatístico pela Fundação Altino
                        Ventura, garantindo-se o sigilo conforme a Lei Geral de Proteção de Dados (13.709/2018).</span>
                </label>
            </div>

            <button type="submit" class="btn-submit" id="submitBtn" disabled>
                <i class="fa-solid fa-paper-plane"></i> Enviar Avaliação
            </button>
        </form>

        <footer>
            <p>© 2026 Fundação Altino Ventura</p>
        </footer>
    </div>

    <div class="modal-overlay" id="successModal">
        <div class="modal-content">
            <div class="modal-icon"><i class="fa-solid fa-circle-check"></i></div>
            <h2 class="modal-title">Sucesso!</h2>
            <p class="modal-text">Os dados da avaliação foram salvos corretamente no sistema.</p>
            <button class="btn-modal" onclick="fecharModalEResetar()">Novo Atendimento</button>
        </div>
    </div>

    <div class="modal-overlay" id="warningModal">
        <div class="modal-content">
            <div class="modal-icon warning-icon"><i class="fa-solid fa-triangle-exclamation"></i></div>
            <h2 class="modal-title warning-title">Atenção!</h2>
            <p class="modal-text" id="warningText">Você não respondeu todas as perguntas.</p>
            <button class="btn-modal warning-btn" onclick="fecharModalWarning()">Entendi</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>